<!DOCTYPE html>
<html>

<head>

        <meta name="viewport" content="width=device-width, initial-scale=1">

        <script src="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.js"></script>
        <link type="text/css" rel="stylesheet" href="https://cdn.firebase.com/libs/firebaseui/3.5.2/firebaseui.css" />

</head>

<body>




        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-app.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-firestore.js"></script>
        <script src="https://www.gstatic.com/firebasejs/7.2.3/firebase-auth.js"></script>
    


    <script>


        

var firebaseConfig = {
            apiKey: "AIzaSyBppJzDA662sj6TZBCP_Dprbx8cIq2SwSU",
            authDomain: "tutorbookvancouver.firebaseapp.com",
            databaseURL: "https://tutorbookvancouver.firebaseio.com",
            projectId: "tutorbookvancouver",
            storageBucket: "tutorbookvancouver.appspot.com",
            messagingSenderId: "169085210695",
            appId: "1:169085210695:web:e24ff38e1ece1c5a65e162"
        };

        // Initialize Firebase
        firebase.initializeApp(firebaseConfig);
        db = firebase.firestore();

        function parseURL(url) {
            let queryStart = url.indexOf("=") + 1;
            let queryEnd = url.length + 1;
            let query = url.slice(queryStart, queryEnd - 1);
            return query
        }

        subject = parseURL(window.location.href)

        function searchBySubject() {

            console.log('inside searchBySubject')

            let tutorArray = db.collection('users')
            tutorArray.where("subjects", "array-contains", subject).get()
                .then(function (tutorArray) {
                    tutorArray.forEach(function (doc) {
                        console.log(doc.data());
                    })
                })
                .catch(function (error) {
                    console.log("Error getting document:", error);
                });
        }

        searchBySubject();

    </script>

</body>

</html>